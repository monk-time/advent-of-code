from inspect import cleandoc

from year2021.aoc20 import apply, coord_to_bin, parse, solve

sample = cleandoc("""
    ..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#

    #..#.
    #....
    ##..#
    ..#..
    ..###
""")


def test_coord_to_bin():
    _, grid = parse(sample)
    assert coord_to_bin((2, 2), grid) == 34


def test_apply():
    algo, grid = parse(sample)
    assert len(apply(algo, grid, 2)) == 35
    assert len(apply(algo, grid, 50)) == 3351


def test_solve():
    assert solve() == (5486, 20210)
